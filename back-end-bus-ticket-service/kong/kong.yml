_format_version: "3.0"
_transform: true

services:
  - name: user-management-service
    url: http://user-management-service:9500
    routes:
      - name: user-management-route
        paths:
          - /api/v1/auth
        methods: [GET, POST, PUT, DELETE]
        strip_path: true
        preserve_host: false
        plugins:
          - name: cors
            config:
              origins: ["*"]
              methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
              headers: ["Accept", "Authorization", "Content-Type"]
              exposed_headers: ["X-Custom-Header"]
              credentials: true
              max_age: 3600

  - name: staff-dispatch-service
    url: http://staff-dispatch-service:9501
    routes:
      - name: staff-dispatch-route
        paths:
          - /api/v1/dispatch
        methods: [GET, POST, PUT, DELETE]
        strip_path: true
        preserve_host: false
        plugins:
          - name: cors
            config:
              origins: ["*"]
              methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
              headers: ["Accept", "Authorization", "Content-Type"]
              exposed_headers: ["X-Custom-Header"]
              credentials: true
              max_age: 3600

  - name: route-trip-management-service
    url: http://route-trip-management-service:9502
    routes:
      - name: route-trip-management-route
        paths:
          - /api/v1/trip
        methods: [GET, POST, PUT, DELETE]
        strip_path: true
        preserve_host: false
        plugins:
          - name: cors
            config:
              origins: ["*"]
              methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
              headers: ["Accept", "Authorization", "Content-Type"]
              exposed_headers: ["X-Custom-Header"]
              credentials: true
              max_age: 3600

  - name: booking-and-payment-service
    url: http://booking-and-payment-service:9503
    routes:
      - name: booking-payment-route
        paths:
          - /api/v1/payment
        methods: [GET, POST, PUT, DELETE]
        strip_path: true
        preserve_host: false
        plugins:
          - name: cors
            config:
              origins: ["*"]
              methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
              headers: ["Accept", "Authorization", "Content-Type"]
              exposed_headers: ["X-Custom-Header"]
              credentials: true
              max_age: 3600
